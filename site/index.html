<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Input Fields</title>
  <style>
    body {
      font-family: 'Fira Code', sans-serif;
      margin: 20px;
    }
    .input-row {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .input-number {
      margin-right: 5px;
    }
    .output-text {
      margin-left: 10px;
    }
    .dynamic-input {
        font-family: 'Fira Code', monospace;
    }
  </style>
</head>
<body>

    <div><span id="isValid" class="valid">Valid</span></div>

<div id="inputContainer">
  <div class="input-row" id="inputRow1">
    <span class="input-number">1.</span>
    <input type="text" id="input1" class="dynamic-input" onkeydown="handleKeyDown(event, 1)">
    <span class="output-text"></span>
  </div>
</div>

<script src="prooftree.js"></script>

<script>
  function handleKeyDown(event, inputNumber) {
    if (event.key === 'Enter') {
      event.preventDefault();
      updateOutputText(inputNumber);
      createNewInput(inputNumber + 1);
    }
  }

  function updateOutputText(inputNumber) {
    const inputElement = document.getElementById('input' + inputNumber);
    const outputTextElement = document.getElementById('inputRow' + inputNumber).getElementsByClassName('output-text')[0];
    outputTextElement.textContent = Prooftree.interp(inputElement.value);
    if (Prooftree.editline(inputNumber, inputElement.value)) {
        isValid.textContent = 'Valid'
    } else {
        isValid.textContent = 'Invalid'
    } 
  }

  function createNewInput(newInputNumber) {
    const inputContainer = document.getElementById('inputContainer');
    
    const inputRow = document.createElement('div');
    inputRow.className = 'input-row';
    inputRow.id = 'inputRow' + newInputNumber;
    
    const inputNumberSpan = document.createElement('span');
    inputNumberSpan.className = 'input-number';
    inputNumberSpan.textContent = newInputNumber + '.';

    const input = document.createElement('input');
    input.type = 'text';
    input.id = 'input' + newInputNumber;
    input.className = 'dynamic-input';
    input.onkeydown = function (event) {
      handleKeyDown(event, newInputNumber);
    };
    input.onblur = function () {
      updateOutputText(newInputNumber);
    };

    const outputTextSpan = document.createElement('span');
    outputTextSpan.className = 'output-text';

    inputRow.appendChild(inputNumberSpan);
    inputRow.appendChild(input);
    inputRow.appendChild(outputTextSpan);
    inputContainer.appendChild(inputRow);

    // Move the cursor to the newly created input field
    input.focus();
  }
</script>

</body>
</html>
